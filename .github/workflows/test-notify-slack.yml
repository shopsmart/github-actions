---

name: 'Notify slack'

on:
  push:
  workflow_call:
    secrets:
      slack_webhook_url:
        required: true
    # inputs:
    #   application:
    #     description: 'The friendly name for the application'
    #     type: string
    #     required: true
    #   environment:
    #     description: 'The environment that is being targeted for this deployment'
    #     type: string
    #     required: true

permissions:
  id-token: write # aws auth
  contents: write # publish release assets

defaults:
  run:
    shell: bash

jobs:
  test-notify-slack:
    uses: ./.github/workflows/notify-slack.yml
    with:
      application: engagement
      environment: staging
      status: success
      type: deployment
      version: v1.0.56
      template: ./.github/actions/test-notify-slack/message.json.j2
    secrets:
      slack_webhook_url: ${{ secrets.SLACK_WEBHOOK_URL }}
